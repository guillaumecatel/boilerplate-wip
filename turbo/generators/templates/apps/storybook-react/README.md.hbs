# Storybook React

A Storybook application for developing and documenting React components with internationalization support.

[Version franÃ§aise](./README_FR.md)

## Features

- ðŸ“– Storybook 10 with React
- ðŸŒ i18n support with Paraglide.js (French/English)
- ðŸŽ¨ Tailwind CSS 4 integration
- â™¿ Accessibility testing with @storybook/addon-a11y
- ðŸ§ª Component testing with Vitest and Playwright
- ðŸ“ Automatic documentation generation
- ðŸ”„ Hot module replacement

## Prerequisites

- **Node.js** >= 24.0.0
- **pnpm** >= 10.0.0 (package manager)
- **nvm** (Node Version Manager) - recommended

```bash
# Install correct Node.js version
nvm use

# Install dependencies
pnpm install
```

## Available Scripts

### Development

```bash
# Start Storybook dev server on port 9009
pnpm dev

# Type checking
pnpm typecheck
```

### Build

```bash
# Build static Storybook
pnpm build
```

### Testing

```bash
# Run component tests with Vitest
pnpm test

# Run tests in watch mode
pnpm test --watch
```

### Maintenance

```bash
# Clean generated files
pnpm clean
```

## Generator Commands

This application includes a Turbo generator for creating new stories:

### Create a Story

```bash
# From workspace root
pnpm turbo gen storybook-react create stories

# Or from app directory
pnpm gen
```

This will:

- Create `src/YourComponent.stories.tsx` with i18n setup
- Include default story template with decorators

## Project Structure

```text
storybook-react/
â”œâ”€â”€ .storybook/
â”‚   â”œâ”€â”€ main.ts             # Storybook configuration
â”‚   â”œâ”€â”€ preview.tsx         # Global decorators and parameters
â”‚   â”œâ”€â”€ style.css           # Global styles
â”‚   â”œâ”€â”€ vitest.setup.ts     # Vitest configuration
â”‚   â”œâ”€â”€ i18n/               # Auto-generated i18n files (Paraglide)
â”‚   â””â”€â”€ decorators/
â”‚       â””â”€â”€ withTranslations.tsx  # i18n decorator
â”œâ”€â”€ src/
â”‚   â””â”€â”€ Welcome.stories.tsx # Example story
â”œâ”€â”€ public/                 # Static assets
â”œâ”€â”€ turbo/
â”‚   â”œâ”€â”€ package.json        # Turbo config
â”‚   â””â”€â”€ generators/
â”‚       â”œâ”€â”€ config.ts       # Generator definitions
â”‚       â””â”€â”€ templates/      # (Uses shared templates from monorepo)
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ vitest.shims.d.ts
```

## Internationalization

Stories support multiple languages using Paraglide.js:

```tsx
import type { Meta, StoryObj } from '@storybook/react'
import * as m from '../.storybook/i18n/messages'

const meta = {
  title: 'Example/Welcome',
  parameters: {
    layout: 'centered',
  },
} satisfies Meta

export default meta

type Story = StoryObj<typeof meta>

export const Default: Story = {
  render: () => (
    <div>
      <h1>{m.welcome()}</h1>
      <p>{m.description()}</p>
    </div>
  ),
}
```

### Available Locales

- `fr` - French (default)
- `en` - English

Switch locales using the toolbar in Storybook.

## Tailwind CSS

Tailwind CSS 4 is pre-configured. Use Tailwind classes directly in your stories:

```tsx
export const Styled: Story = {
  render: () => (
    <button className='rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600'>
      Button
    </button>
  ),
}
```

Configuration is imported from `tailwind-config` workspace package.

## Accessibility Testing

The a11y addon is enabled by default. View accessibility violations in the Storybook panel:

```tsx
export const AccessibleButton: Story = {
  render: () => <button aria-label='Close'>Ã—</button>,
  parameters: {
    a11y: {
      config: {
        rules: [{ id: 'color-contrast', enabled: true }],
      },
    },
  },
}
```

## Component Testing

Write component tests using Vitest and Playwright:

```tsx
import { test, expect } from '@storybook/experimental-addon-vitest'
import { composeStories } from '@storybook/react'
import * as stories from './Button.stories'

const { Primary } = composeStories(stories)

test('renders primary button', async ({ mount }) => {
  const component = await mount(<Primary />)
  await expect(component.getByRole('button')).toBeVisible()
})
```

Run tests:

```bash
pnpm test
```

## Adding Addons

To add Storybook addons, install them and update `.storybook/main.ts`:

```bash
pnpm add -D @storybook/addon-controls
```

```typescript
// .storybook/main.ts
export default {
  addons: [
    '@storybook/addon-controls',
    // ... other addons
  ],
}
```

## Build Output

Running `pnpm build` generates a static Storybook in `storybook-static/` that can be deployed to any static hosting service.

## Development Workflow

1. **Create a story**: `pnpm gen` â†’ Choose "create stories"
2. **Start Storybook**: `pnpm dev`
3. **Write component stories**: Add stories in `src/` directory
4. **Test components**: `pnpm test`
5. **Build for deployment**: `pnpm build`

## License

UNLICENSED (private application)
